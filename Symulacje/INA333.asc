Version 4
SHEET 1 996 904
WIRE 256 -336 32 -336
WIRE 880 -304 736 -304
WIRE 160 -272 160 -304
WIRE 32 -256 32 -336
WIRE 128 -256 32 -256
WIRE 256 -240 256 -336
WIRE 256 -240 192 -240
WIRE 288 -240 288 -272
WIRE 288 -240 256 -240
WIRE 320 -240 288 -240
WIRE 32 -224 -16 -224
WIRE 128 -224 32 -224
WIRE 288 -224 288 -240
WIRE 736 -224 736 -304
WIRE 768 -224 736 -224
WIRE 880 -208 880 -304
WIRE 880 -208 832 -208
WIRE -352 -176 -352 -192
WIRE -352 -176 -432 -176
WIRE 160 -176 160 -208
WIRE -432 -160 -432 -176
WIRE -352 -160 -352 -176
WIRE -128 -64 -128 -96
WIRE 32 48 32 -224
WIRE 32 48 -128 48
WIRE 112 48 112 16
WIRE 112 48 32 48
WIRE 128 48 112 48
WIRE -128 64 -128 48
WIRE 128 80 96 80
WIRE -496 96 -496 16
WIRE -1136 112 -1216 112
WIRE -1056 112 -1056 80
WIRE -1056 112 -1136 112
WIRE -576 112 -1056 112
WIRE -528 112 -560 112
WIRE -1216 128 -1216 112
WIRE -1136 128 -1136 112
WIRE -1056 128 -1056 112
WIRE -576 128 -576 112
WIRE -544 128 -576 128
WIRE -368 128 -464 128
WIRE -272 128 -368 128
WIRE 448 128 432 128
WIRE 464 128 448 128
WIRE -560 144 -560 112
WIRE -560 144 -592 144
WIRE -544 144 -544 128
WIRE -528 144 -544 144
WIRE 448 144 448 128
WIRE -128 160 -128 144
WIRE 96 176 96 160
WIRE 128 176 96 176
WIRE -592 208 -592 144
WIRE -368 208 -368 128
WIRE -368 208 -592 208
WIRE 128 208 112 208
WIRE -1216 224 -1216 192
WIRE -1136 224 -1136 192
WIRE -1136 224 -1216 224
WIRE -1056 224 -1056 208
WIRE -1056 224 -1136 224
WIRE -496 224 -496 160
WIRE -1056 240 -1056 224
WIRE 448 240 448 224
WIRE -128 256 -128 240
WIRE 112 256 112 208
WIRE 112 256 -128 256
WIRE 304 256 304 240
WIRE -128 384 -128 368
WIRE 304 400 304 336
WIRE -1072 528 -1088 528
WIRE -976 528 -992 528
WIRE -672 528 -800 528
WIRE -544 528 -672 528
WIRE -432 528 -544 528
WIRE -800 544 -800 528
WIRE -672 544 -672 528
WIRE -544 544 -544 528
WIRE -432 544 -432 528
WIRE -1088 640 -1088 528
WIRE -1072 640 -1088 640
WIRE -976 640 -976 528
WIRE -976 640 -992 640
WIRE -800 640 -800 624
WIRE -672 640 -672 624
WIRE -672 640 -800 640
WIRE -544 640 -544 624
WIRE -544 640 -672 640
WIRE -432 640 -432 624
WIRE -432 640 -544 640
WIRE -800 656 -800 640
FLAG 256 16 Vcc
FLAG -352 -272 Vcc
FLAG -352 -80 Vee
FLAG 256 240 Vee
FLAG -432 -160 0
FLAG -1056 0 Vcc
FLAG -1056 240 Vee
FLAG -272 128 Vref
FLAG 304 400 Vref
FLAG 464 128 Vout
FLAG -128 -96 Vcc
FLAG -496 16 Vcc
FLAG -496 224 Vee
FLAG -800 656 0
FLAG 112 -64 Vref2
FLAG -128 384 Vee
FLAG 448 240 Vee
FLAG 800 -240 Vcc
FLAG 800 -176 Vee
FLAG 928 -208 Vcm
FLAG 160 -304 Vcc
FLAG 160 -176 Vee
FLAG 320 -240 Vref2
FLAG 288 -144 Vee
FLAG 288 -352 Vcc
FLAG -16 -224 Vcm
SYMBOL res 80 64 R0
SYMATTR InstName R1
SYMATTR Value {Rg}
SYMBOL voltage -352 -288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=2
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL voltage -352 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 0
SYMBOL res 432 128 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res -1072 -16 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -1072 112 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL cap -1152 128 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL cap -1232 128 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL INA333 256 128 R0
SYMATTR InstName U1
SYMBOL res -144 48 R0
SYMATTR InstName R6
SYMATTR Value {Rmeas}
SYMBOL current -544 544 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value {Imeas}
SYMBOL current -672 544 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I2
SYMATTR Value {Imeas}
SYMBOL voltage -128 144 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL res -816 528 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL res 96 -80 R0
SYMATTR InstName R8
SYMATTR Value 10Meg
SYMBOL res -144 272 R0
SYMATTR InstName R3
SYMATTR Value {Rin+1m}
SYMBOL res -144 -80 R0
SYMATTR InstName R9
SYMATTR Value {10meg-Rin+1m}
SYMBOL voltage 304 240 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL bv -976 528 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B1
SYMATTR Value V=0;0.8m*(rand(1e8*time)-0.5)
SYMBOL OpAmps\\UniversalOpAmp3 800 -208 R0
SYMATTR InstName U3
SYMBOL res -976 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL OpAmps\\UniversalOpAmp3 -496 128 R0
SYMATTR InstName U2
SYMBOL res 272 -240 R0
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL res 272 -368 R0
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL OpAmps\\UniversalOpAmp3 160 -240 R0
SYMATTR InstName U4
TEXT 112 632 Left 2 !;.step param Vd 0 1 0.05
TEXT 112 608 Left 2 !;.param Vd 0.1
TEXT 112 664 Left 2 !;.dc V3 -0.1 0.1 0.02
TEXT 112 688 Left 2 !.ac dec 20 10 1meg
TEXT -352 616 Left 2 !;.dc V3 0 3.3 0.33
TEXT -88 496 Left 2 !.param Rg 10
TEXT -88 528 Left 2 !.param Rmeas 100
TEXT -352 736 Left 2 !.param Imeas 1u
TEXT -352 768 Left 2 !;.step param Imeas -0.1u 0.1u 0.01u
TEXT -352 816 Left 2 !;.op
TEXT -352 792 Left 2 !;.step param Imeas -1u 1u 0.1u
TEXT -352 840 Left 2 !;.tran 10m
TEXT -88 440 Left 2 !.param Rin 1meg
TEXT -88 464 Left 2 !;.step param Rin 0 10meg 1meg
